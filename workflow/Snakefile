# vim: syntax=python tabstop=4 expandtab
# coding: utf-8

__author__ = "Arielle R Munters"
__copyright__ = "Copyright 2022, Arielle R Munters"
__email__ = "arielle.munters@scilifelab.uu.se"
__license__ = "GPL-3"

ruleorder: alignment_samtools_index  > copy_bai
# ruleorder: alignment_samtools_sort > copy_bam

include: "rules/common.smk"
include: "rules/result_files.smk"

report: "report/workflow.rst"


rule all:
    input:
        unpack(compile_output_list),

module prealignment:
    snakefile:
        github(
            "hydra-genetics/prealignment",
            path="workflow/Snakefile",
            tag="c903c9d",  #"v0.1.0",
        )
    config: config

use rule * from prealignment as prealignment_*


module alignment:
   snakefile:
        github(
            "hydra-genetics/alignment",
            path="workflow/Snakefile",
            tag="e39197e",
        )
   config: config

use rule * from alignment as alignment_*


module qc:
    snakefile:
        github(
            "hydra-genetics/qc",
            path="workflow/Snakefile",
            tag="32c8b1f",
        )
    config: config

use rule * from qc as qc_*


module snv_indels:
    snakefile:
        github(
            "hydra-genetics/snv_indels",
            path="workflow/Snakefile",
            tag="d08edb3",
        )
    config: config

use rule * from snv_indels as snv_indels_*
